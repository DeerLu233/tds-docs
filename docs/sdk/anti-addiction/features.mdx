---
title: 实名认证和防沉迷功能介绍
sidebar_label: 功能介绍
sidebar_position: 1
---

## 准备工作

### 注册中宣部实名认证系统

在使用 TDS 实名认证和防沉迷服务之前，你需要完成[中宣部网络游戏防沉迷实名认证系统](https://wlc.nppa.gov.cn/fcm_company/index.html#/login?redirect=%2F)的注册工作，通过接口测试，并获取相关凭证：

- 游戏备案识别码 `bizID`
- 应用标识 `APP ID` 
- 应用密钥 `Secret Key`

![](/img/anti-addiction/biz-id.png)
![](/img/anti-addiction/testcase.png)
![](/img/anti-addiction/secretkey.png)

### 完成开发者中心配置

在 TapTap 开发者中心对应的游戏里，找到**游戏服务 > 合规认证**菜单，按照要求完成参数配置。

![](/img/anti-addiction/anti-addiction-qualification.png)

## 接入 TDS 实名认证和防沉迷服务

完成准备工作后，可接入 TDS 实名认证和防沉迷服务。TDS 提供的实名认证和防沉迷模块，分为两个部分：

- TapTap 快速认证
- 游戏实名认证与防沉迷

### TapTap 快速认证

TDS 提供了 TapTap 账号的快速实名认证功能，对使用 TapTap 账号登录游戏的玩家，在经过玩家同意授权之后，允许玩家使用在 TapTap 里已经通过国家认证的实名信息快速完成游戏中的认证流程。

开发者[调用 SDK 的接口](/sdk/anti-addiction/guide/#防沉迷授权)时可以选择是否集成 TapTap 快速认证功能。

业务流程：

![](/img/anti-addiction/anti-addiction-flow.png)

界面预览：

![](/img/anti-addiction/image2021-10-18_17-57-51.png)

### 游戏实名认证与防沉迷

按照国家新闻出版署[《关于进一步严格管理切实防止未成年人沉迷网络游戏的通知》](http://www.nppa.gov.cn/nppa/contents/279/98792.shtml)，各游戏出版运营企业均须在游戏内落实游戏实名认证和防沉迷新策略。

#### 实名认证

《通知》中要求，所有用户必须使用真实有效身份信息进行游戏账号注册并登录网络游戏。TDS 已为开发者自动对接了中宣部网络游戏防沉迷实名认证系统，并以开发者主体进行信息上报，符合中宣部对游戏企业接入的合规要求。

业务流程：

- 在玩家登录时，调用 SDK 实名认证的接口，如账号为未实名状态，则会触发实名认证界面，完成真实信息填写。
- 完成填写后，TDS 会将信息提交至中宣部系统中进行真实性校验（请先确认已完成开发者中心的配置工作，否则无法成功校验）。

![](/img/anti-addiction/anti-addiction-flow-2.png)

##### 界面预览

![](/img/anti-addiction/image2021-10-19_17-4-12.png)

### 防沉迷策略

《通知》中要求，游戏企业必须严格管理未成年的游戏时间以及付费额度。
SDK 封装了相应接口，游戏可通过 TDS 云端查询未成年玩家是否处于可以游戏的时间段内，以及未成年玩家的某笔消费是否受限。

![](/img/anti-addiction/image2021-10-19_17-6-17.png)


#### 游戏时间限制

仅允许未成年人在**周五、周六、周日和法定节假日的 20:00 至 21:00** 进行游戏。

#### 充值额度限制

- 不满 8 岁，无法在游戏内进行充值。

**同一网络游戏企业**所提供的游戏付费服务需要满足:

- 满 8 岁，不满 16 岁的用户，单次充值 ≤ 50 元 ，单月充值累计 ≤ 200 元
- 满 16 岁，不满 18 岁的用户，单次充值 ≤ 100 元 ，单月充值累计 ≤ 400 元

注意，计算限制时，同一企业的所有网络游戏的充值共同累计。
例如，假定一家企业名下有两款网络游戏，一个满 8 岁，不满 16 岁的用户某月在其中一款游戏下累计充值了 100 元，那么他在另一款游戏下最多只能再充 100 元。

### 常见问题

#### 非 TapTap 账号登录的玩家，是否可以使用 TapTap 快速认证 ？

暂不支持。TapTap 快速认证目前仅支持使用 TapTap 账号登录游戏的玩家。

#### 我的游戏没有接入 TapTap 登录，可以使用 TapSDK 里的实名认证和防沉迷模块吗？

可以的。TapSDK 中的游戏实名认证和防沉迷模块，不限制登录方式。

#### 实名认证时使用 TapTap 快速认证服务提示：授权失败

无版号游戏未通过工单申请开通实名认证服务。

#### 实名认证时使用手动输入实名信息服务提示：未查询到实名认证配置 

无版号游戏未开启实名认证服务，需要通过开发者中心后台提工单来申请开通实名认证服务。

#### 实名认证时提示 “userIdentifier is empty”

调用认证接口时需要传入的玩家唯一标识 userIdentifier 参数值为空，建议开发者对此做非空判断。

#### 调用了初始化防沉迷 UI 模块代码，但是并没有弹出实名认证窗口

初始化防沉迷 UI 模块代码只是 SDK 的初始化，同时注册防沉迷的消息监听，并不会触发实名认证弹窗。触发实名认证弹窗需要调用[认证接口](/sdk/anti-addiction/guide/#防沉迷认证)。

#### 如何针对未成年用户开启时长限制功能？

首先 SDK 在初始化时需要对 `useTimeLimit` 参数设置成 `true`；其次已登录的玩家，开始游戏时调用此接口 `AntiAddictionUIKit#EnterGame`，相应的，停止游戏时调用此接口 `AntiAddictionUIKit#LeaveGame`。

### 注意事项

#### 玩家唯一标识 userIdentifier 参数说明

第一次认证通过后，后面每一次以同样的 userIdentifier 认证都会直接拿到第一次认证的结果。因此，同一个用户的唯一标识应该要保证唯一性。